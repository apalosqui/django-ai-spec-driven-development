{% extends 'base.html' %}
{% block title %}Onboarding — Fixos e Variável{% endblock %}
{% block content %}
  <h1 class="text-xl font-semibold mb-4">Despesas fixas e orçamento variável</h1>
  <form method="post" class="space-y-5">
    {% csrf_token %}

    <div class="bg-slate-900/60 border border-slate-800 rounded-xl p-4">
      <h2 class="font-semibold mb-3">Orçamento variável mensal</h2>
      <div class="max-w-sm">
        {{ var_form.variable_budget.label_tag }}
        {{ var_form.variable_budget }}
        {{ var_form.variable_budget.errors }}
      </div>
    </div>

    <div class="bg-slate-900/60 border border-slate-800 rounded-xl p-4">
      <h2 class="font-semibold mb-3">Despesas fixas (até 10 itens)</h2>
      {{ formset.management_form }}
      <div class="grid grid-cols-1 md:grid-cols-6 gap-3 text-sm text-slate-300">
        <div class="md:col-span-2">Nome</div>
        <div>Valor (R$)</div>
        <div>Dia</div>
        <div>Periodicidade</div>
        <div>Conta</div>
      </div>
      <div class="space-y-3 mt-2">
        {% for form in formset %}
          <div class="grid grid-cols-1 md:grid-cols-6 gap-3">
            <div class="md:col-span-2">{{ form.name }}</div>
            <div>{{ form.amount }}</div>
            <div>{{ form.due_day }}</div>
            <div>{{ form.periodicity }}</div>
            <div>{{ form.paying_account }}</div>
            <div class="flex items-center">{{ form.pay_early_business_day }} <span class="ml-2 text-sm text-slate-300">Dia útil anterior</span></div>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="flex gap-3">
      <button class="inline-flex items-center px-4 py-2 rounded-md bg-slate-800 border border-slate-700 hover:bg-slate-700" type="submit">Concluir Onboarding</button>
      <a href="{% url 'dashboard' %}" class="inline-flex items-center px-4 py-2 rounded-md border border-slate-700 hover:bg-slate-800">Pular</a>
    </div>
  </form>
{% endblock %}

